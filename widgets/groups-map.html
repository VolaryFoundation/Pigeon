<!DOCTYPE html>
<html>
<head>
  <link href="css/widgets.css" rel="stylesheet" type="text/css">
  <link href="css/chosen.css" rel="stylesheet" type="text/css">
  <link href="app.css" rel="stylesheet" type="text/css">
  <link href='http://fonts.googleapis.com/css?family=Lato' rel='stylesheet' type='text/css'>
  <link href='//api.tiles.mapbox.com/mapbox.js/v1.5.2/mapbox.css' rel='stylesheet' />
  <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
</head>
<body>

    <div id="map-widget">

      <div rv-class-showing="ui:message" class="message">{ ui:message }</div>

      <div style="display: none" rv-show="ui:promptingForEmail" id="backdrop" rv-on-click="ui.toggleEmailPrompt"></div>
      <div style="display: none" rv-show="ui:promptingForEmail" class="overlay">
        <h4>Enter your email to be notified when these results change.</h4>
        <input type="text" placeholder="user@example.com" />
        <button rv-on-click="ui.toggleEmailPrompt | preventDefault">Cancel</button>
        <button rv-on-click="ui.saveEmail | preventDefault">Save</button>
      </div>


      <div id="controls">
        <button rv-on-click="ui.toggleShowFilters | preventDefault">Filter</button>
        <button rv-on-click="ui.triggerCloner | preventDefault">Clone</button>
        <!--<button rv-on-click="ui.toggleEmailPrompt | preventDefault">Keep up to date</button>-->
      </div>

      <div id="simple-filters">
        <h4>Filters:</h4>
        <fieldset id="location">
          <div class='input_state'>
            <input laceholder="State" type="text" size="2" rv-value="filters:location-state | toUpperCase" />
          </div>
          <div class='input_city' >
            <input placeholder="City" type="text" rv-value="filters:location-city" />
          </div>
        </fieldset>
        <fieldset class="tags">
          <select multiple rv-chosen data-placeholder="Tags" rv-value="ui:activeTags">
            <option rv-each-tag="filters.tags.models" rv-value="tag:name" rv-text="tag:name"></option>
          </select>
        </fieldset>
        <fieldset class='num-results'>
          <p>{ searcher:results | count } results</p>
        </fieldset>
        <fieldset class='menu' rv-on-click="ui.toggleShowMenu">
          <p><i class="fa fa-bars fa-2x"></i></p>
        </fieldset>
      </div>
      <div id='widget-menu' rv-show='ui:showMenu'>
        <ul>
          <li rv-on-click="ui.triggerCloner">Clone This Widget</li>
          <!--<li>Email Button</li>-->
        </ul>
      </div>
      <footer rv-autoscroll="ui:activeResult">
        <i rv-on-click="ui.prevItem" class="prev fa fa-angle-left"></i>
        <i rv-on-click="ui.nextItem" class="next fa fa-angle-right"></i>
        <div id="list-container">
          <ul>
            <li rv-each-result="searcher:results" rv-on-click="result.activate | preventDefault" rv-class-active="result:active" rv-id="result:_id">
              <h3 class='seperator'>{ result:name }</h3>
              <span class='tags seperator'>{ result:tags | asList 75 }</span>
              <div class="foot">
                <div class="half">
                  <span>{ result:location.city | capitalize }</span>
                </div>
                <div class="half">
                  <a class='readMoreLink' rv-href="result:refs.mockingbird | toMockingBird" href='#' rv-on-click='result.sendOn | preventDefault'>Details</a>
                </div>
              </div>
            </li>
          </ul>
        </div>
      </footer>
      <div rv-map="map" id="map"></div>
    </div>

    <script src='//api.tiles.mapbox.com/mapbox.js/v1.5.2/mapbox.js'></script>
    <script src="/js/build/groups_map.js"></script>
</body>
</html>
